<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>项目背景介绍</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 引入 Inter 字体，并使用计算器页面的背景色 */
        body {
            font-family: 'Inter', 'Microsoft YaHei', 'SimHei', sans-serif;
            background-color: #f7f7f7; /* 与计算器页面背景色同步 */
        }
        /* 为卡片添加统一的视觉效果 */
        .card {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            border: 1px solid #e5e7eb; /* gray-200 */
        }
        .card:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .nav-link.active {
            background-color: #eef2ff; /* primary-light */
        }
        @font-face {
            font-family: 'KaTeX_AMS';
            src: url('https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/fonts/KaTeX_AMS-Regular.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }
        .formula-container {
            min-height: 2.5em; /* 至少保证一行高度 */
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#1d4ed8', 
                        'secondary': '#374151',
                        'primary-light': '#eef2ff',
                    }
                }
            }
        }
    </script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrS44tSwY4YqPz7/7R6b2T+R4c4Wp6m6L0nK7+D+sQ8JkQ3Lz7YJ5dCj5WfO+M+W" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js" integrity="sha384-sJ24/7R3vG29l/J+9zW5c5Wp5o/Qo/7t+5d5KqA+7D+jK4qK4Wq2j1Vp4X6p4z4Q6" crossorigin="anonymous"></script>
    </head>
<body class="min-h-screen flex flex-col items-center p-4">

    <div class="fixed top-4 right-4 z-50">
        <button id="lang-button" onclick="toggleLanguage()" class="p-3 bg-primary text-white rounded-full shadow-lg hover:bg-blue-800 transition duration-150 text-sm font-semibold">
            <span data-lang-cn="Switch to English" data-lang-en="切换至中文">Switch to English</span>
        </button>
    </div>

    <header class="w-full max-w-5xl mb-12">
        <nav class="bg-white p-6 rounded-2xl shadow-xl flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0 border-t-4 border-primary">
            <h1 class="text-3xl font-extrabold text-primary tracking-tight" data-lang-cn="项目背景" data-lang-en="Project Background">项目背景</h1>
            <div class="flex flex-wrap justify-center space-x-4">
                <a href="index.html" class="nav-link text-secondary hover:text-primary font-medium transition duration-150 p-2 rounded-lg hover:bg-gray-100">
                    <span data-lang-cn="主页" data-lang-en="Home">主页</span>
                </a>
                <a href="background.html" class="nav-link text-primary hover:text-blue-800 font-semibold transition duration-150 p-2 rounded-lg bg-primary-light active">
                    <span data-lang-cn="项目背景" data-lang-en="Project Background">项目背景</span>
                </a>
                <a href="usage_guide.html" class="nav-link text-secondary hover:text-primary font-medium transition duration-150 p-2 rounded-lg hover:bg-gray-100">
                    <span data-lang-cn="使用指引" data-lang-en="Usage Guide">使用指引</span>
                </a>
                <a href="hierarchical_calculator.html" class="nav-link text-secondary hover:text-primary font-medium transition duration-150 p-2 rounded-lg hover:bg-gray-100">
                    <span data-lang-cn="计算器" data-lang-en="Calculator">计算器</span>
                </a>
            </div>
        </nav>
    </header>

    <main class="w-full max-w-5xl space-y-12">
        
        <section id="table-of-contents" class="card bg-white p-6 rounded-2xl border-l-4 border-secondary/50">
            <h2 class="text-2xl font-extrabold text-secondary mb-4" data-lang-cn="目录" data-lang-en="Table of Contents">目录</h2>
            <nav class="text-blue-700 space-y-2">
                </nav>
        </section>

        <section id="section-origin" class="card bg-white p-8 rounded-2xl border-l-4 border-primary">
            <h2 class="text-3xl font-extrabold text-primary mb-4 border-b pb-2" data-lang-cn="1. 学术制度起源：罗马法与教会传统" data-lang-en="1. Origin of Academic System: Roman Law and Ecclesiastical Tradition">1. 学术制度起源：罗马法与教会传统</h2>
            <div class="text-secondary space-y-4 leading-relaxed">
                </div>
        </section>

        <section id="section-challenge" class="card bg-white p-8 rounded-2xl">
            <h2 class="text-3xl font-extrabold text-primary mb-4 border-b pb-2" data-lang-cn="2. 当代挑战：平均主义与工程式训练的冲突" data-lang-en="2. Contemporary Challenges: Conflict between Egalitarianism and Technical Training">2. 当代挑战：平均主义与工程式训练的冲突</h2>
            <div class="text-secondary space-y-4 leading-relaxed">
                </div>
        </section>
        
        <section id="section-quirec" class="card bg-white p-8 rounded-2xl border-l-4 border-primary">
            <h2 class="text-3xl font-extrabold text-primary mb-4 border-b pb-2" data-lang-cn="3. QuIReC 模型：基于 CRediT 的量化方法" data-lang-en="3. The QuIReC Model: CRediT-Based Quantification Solution">3. QuIReC 模型：基于 CRediT 的量化方法</h2>
            <div class="text-secondary space-y-4 leading-relaxed">
                <p data-lang-cn="为应对上述挑战，本项目提出了**基于CRediT的研究贡献量化法 (QuIReC)**。QuIReC 不试图取代荣誉制度，而是提供一套客观、透明的量化工具，精确识别和衡量不同层级贡献者的实际价值。" data-lang-en="To address these challenges, this project introduces the **Quantification of Research Contribution based on CRediT (QuIReC)**. QuIReC does not aim to replace the honor system, but rather provides an objective, transparent quantitative tool to accurately identify and measure the actual value of contributors at different levels."></p>
                
                <h3 id="section-s2-principle" class="text-xl font-bold text-blue-800 pt-4" data-lang-cn="3.1 核心原理：S²自加权平均法" data-lang-en="3.1 Core Principle: S² Self-Weighted Average Method">3.1 核心原理：S²自加权平均法</h3>
                <p data-lang-cn="QuIReC 模型的 V4.0 版本采用了创新的 <span id='inline-formula-1'></span> 平均法（分数平方加权平均）。该方法通过将个体的总贡献分数 <span id='inline-formula-2'></span> 进行平方 <span id='inline-formula-3'></span>，作为其在分配贡献时的权重。这确保了高分值主体在下一级分配中获得与其价值相匹配的更高影响力，从而实现**贡献的自我加权**。" data-lang-en="Version 4.0 of the QuIReC model uses the innovative <span id='inline-formula-1-en'></span> Average method (Score-Squared Weighted Average). This method squares the total contribution score <span id='inline-formula-2-en'></span> of an individual <span id='inline-formula-3-en'></span> to serve as their weighting factor during contribution allocation. This ensures that high-score entities gain a disproportionately higher influence matching their value in the next level of allocation, achieving **self-weighting of contributions**."></p>
                <p data-lang-cn="**计算平均档位 <span id='inline-formula-4'></span> 的公式如下:**" data-lang-en="**The formula for calculating the Average Tier <span id='inline-formula-4-en'></span> is as follows:**" class="font-mono"></p>
                
                <div id="block-formula-1" class="formula-container text-center bg-gray-100 p-4 rounded-lg my-4 overflow-x-auto text-lg font-mono text-red-600">
                    </div>

                <h3 id="section-factors-detail" class="text-xl font-bold text-blue-800 pt-4" data-lang-cn="3.2 三大贡献因子详解" data-lang-en="3.2 Detailed Explanation of the Three Contribution Factors">3.2 三大贡献因子详解</h3>
                <p data-lang-cn="QuIReC 沿用了 CRediT 理念，但聚焦于以下三个关键因子，并采用 1 到 6 的分档定级。" data-lang-en="QuIReC adopts the CRediT philosophy but focuses on the following three key factors, using a tier system from 1 to 6."></p>
                <ul class="list-disc list-inside space-y-3 pl-4">
                    <li><strong class="text-blue-800" data-lang-cn="稀缺性 (S):" data-lang-en="Scarcity (S):">稀缺性 (S):</strong> <span data-lang-cn="衡量工作的独特性和不可替代性。代表该贡献在多大程度上需要不可替代的知识、技能或资源。越稀缺，分数越高。" data-lang-en="Measures the uniqueness and irreplaceability of the work. Represents the extent to which the contribution required irreplaceable knowledge, skills, or resources. The scarcer the work, the higher the score."></span></li>
                    <li><strong class="text-blue-800" data-lang-cn="因果关系 (C):" data-lang-en="Causality (C):">因果关系 (C):</strong> <span data-lang-cn="衡量该贡献对最终成果产生的直接决定性影响。代表该贡献是成果发生的充分且必要条件，还是仅是辅助条件。影响越直接，分数越高。" data-lang-en="Measures the direct, decisive impact of the contribution on the final outcome. Represents whether the contribution was a sufficient and necessary condition for the result or merely an auxiliary condition. The more direct the impact, the higher the score."></span></li>
                    <li><strong class="text-blue-800" data-lang-cn="突破性 (B):" data-lang-en="Breakthrough (B):">突破性 (B):</strong> <span data-lang-cn="衡量工作在知识、技术或方法论上实现的创新程度或创造性。代表该工作是否带来了实质性的、此前不存在的增量价值。创新度越大，分数越高。" data-lang-en="Measures the degree of innovation or creativity achieved in knowledge, technology, or methodology. Represents whether the work provided substantial, previously non-existent incremental value. The greater the innovation, the higher the score."></span></li>
                </ul>
                <p data-lang-cn="每个参与者的总档位 <span id='inline-formula-5'></span> 为三因子之和 <span id='inline-formula-6'></span>。" data-lang-en="The total tier <span id='inline-formula-5-en'></span> for each participant is the sum of the three factors: <span id='inline-formula-6-en'></span>。" class="font-mono"></p>
            </div>
        </section>

    </main>

    <footer class="mt-16 w-full max-w-5xl border-t pt-8 text-center text-secondary text-sm">
        <p data-lang-cn="&copy; 2025 QuIReC. All rights reserved. Thanks for the assist and support by the Google Gemini large language model for the development of this website." data-lang-en="&copy; 2025 QuIReC. All rights reserved. Thanks for the assist and support by the Google Gemini large language model for the development of this website.">&copy; 2025 QuIReC. All rights reserved. Thanks for the assist and support by the Google Gemini large language model for the development of this website.</p>
    </footer>

    <script>
        let currentLang = 'cn';
        
        // --- 语言切换核心函数 ---
        const updateText = (lang) => {
            document.querySelectorAll('[data-lang-cn], [data-lang-en]').forEach(element => {
                const cnText = element.getAttribute('data-lang-cn');
                const enText = element.getAttribute('data-lang-en');

                if (cnText && enText) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        if (element.placeholder) {
                            element.placeholder = lang === 'cn' ? cnText : enText;
                        }
                    } else {
                        // 仅更新没有公式 ID 的元素
                        if (!element.id || element.id.indexOf('-formula-') === -1) {
                            element.textContent = lang === 'cn' ? cnText : enText;
                        }
                    }
                }
            });

            const langButton = document.getElementById('lang-button');
            if (langButton) {
                const buttonSpan = langButton.querySelector('span');
                const cnLabel = buttonSpan.getAttribute('data-lang-cn') || "Switch to English";
                const enLabel = buttonSpan.getAttribute('data-lang-en') || "切换至中文";
                
                buttonSpan.textContent = lang === 'cn' ? cnLabel : enLabel;
            }

            document.documentElement.lang = lang === 'cn' ? 'zh-CN' : 'en';
        };

        function toggleLanguage() {
            currentLang = currentLang === 'cn' ? 'en' : 'cn';
            updateText(currentLang);
        }
        
        // ===========================================
        // === 关键修复：使用 window.onload 确保所有脚本和元素加载完毕再渲染公式和设置页面 ===
        // ===========================================
        window.addEventListener('load', function() {
            
            // 1. 页面基本设置和语言初始化 (使用 try-catch 保证不中断)
            try {
                const path = window.location.pathname.split('/').pop();
                const links = {
                    'index.html': 'index.html',
                    'background.html': 'background.html',
                    'usage_guide.html': 'usage_guide.html',
                    'hierarchical_calculator.html': 'hierarchical_calculator.html'
                };
                
                // Highlight the correct link
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active', 'bg-primary-light', 'font-semibold');
                    link.classList.add('text-secondary', 'font-medium', 'hover:bg-gray-100');
                });

                const activeLink = document.querySelector(`a[href=\"${links[path] || 'background.html'}\"]`);
                if (activeLink) {
                    activeLink.classList.add('active', 'bg-primary-light', 'font-semibold');
                    activeLink.classList.remove('text-secondary', 'font-medium', 'hover:bg-gray-100');
                }
                updateText(currentLang);
            } catch(e) {
                console.error("Page setup failed:", e);
            }
            
            // 2. KaTeX 渲染 (使用单独的 try-catch 保证页面其余部分可见)
            try {
                if (typeof katex === 'undefined') {
                    console.error("KaTeX core library failed to load or is not defined.");
                    return;
                }

                // --- 核心公式定义 ---
                const formulas = {
                    'block-formula-1': '\\large S_{avg} = \\frac{\\sum S^2}{\\sum S}',
                    'inline-formula-1': 'S^2', 'inline-formula-1-en': 'S^2',
                    'inline-formula-2': 'S_p', 'inline-formula-2-en': 'S_p',
                    'inline-formula-3': '(S_p^2)', 'inline-formula-3-en': '(S_p^2)',
                    'inline-formula-4': 'S_{avg}', 'inline-formula-4-en': 'S_{avg}',
                    'inline-formula-5': 'S_p', 'inline-formula-5-en': 'S_p', 
                    'inline-formula-6': 'S + C + B', 'inline-formula-6-en': 'S + C + B', 
                };

                // --- 渲染循环 ---
                for (const id in formulas) {
                    const element = document.getElementById(id);
                    if (element) {
                        // 单独捕获每个渲染错误，避免中断整个脚本
                        try {
                            const isDisplayMode = id.startsWith('block'); 
                            
                            katex.render(formulas[id], element, {
                                displayMode: isDisplayMode,
                                throwOnError: false // 避免 KaTeX 渲染错误导致页面崩溃
                            });
                        } catch (e) {
                            console.error(`Error rendering KaTeX for ID ${id}:`, e);
                            element.textContent = formulas[id]; // 渲染失败时显示 LaTeX 源码
                        }
                    }
                }
            } catch (e) {
                console.error("KaTeX rendering block failed unexpectedly:", e);
            }
        });
    </script>
</body>
</html>
